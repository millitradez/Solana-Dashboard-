            }
        }
 
        /**
         * A more robust way to get the Phantom provider. It waits for the wallet
         * to be injected into the window object.
         */
        const getProvider = () => {
            return new Promise((resolve) => {
                if ("solana" in window) {
                    const provider = window.solana;
                    if (provider.isPhantom) {
                        return resolve(provider);
                    }
                }
                // Listen for the wallet to be injected
                window.addEventListener("solana#initialized", () => {
                    const provider = window.solana;
                    if (provider.isPhantom) {
                        return resolve(provider);
                    }
                });
            });
        };
 
        // Initialize wallet on page load
        (async () => {
            updateWalletUI(false, null, 'Awaiting Wallet...');
            walletProvider = await getProvider();
           
            walletProvider.on('connect', (publicKey) => updateWalletUI(true, publicKey));
            walletProvider.on('disconnect', () => updateWalletUI(false, null, 'Wallet has been disconnected.'));
 
            // Try to connect silently
            walletProvider.connect({ onlyIfTrusted: true })
                .catch(() => updateWalletUI(false, null, 'Not Connected'));
        })();
 
        // Handles both connecting and disconnecting the wallet
        async function handleWalletAction() {
 
