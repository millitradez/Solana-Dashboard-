<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üöÄ Solana Dashboard</title>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(180deg, #6a11cb, #2575fc);
      color: white;
      text-align: center;
      padding: 20px;
      margin: 0;
    }
    h1 {
      font-size: 2.5em;
      margin-bottom: 10px;
    }
    .section {
      background: rgba(255,255,255,0.1);
      padding: 20px;
      border-radius: 15px;
      margin: 15px auto;
      max-width: 420px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    button {
      background: #00c3ff;
      color: white;
      border: none;
      padding: 12px 18px;
      font-size: 1em;
      border-radius: 10px;
      cursor: pointer;
      transition: 0.2s;
    }
    button:hover {
      background: #02b0e4;
    }
    input {
      padding: 10px;
      width: 90%;
      border-radius: 10px;
      border: none;
      margin-bottom: 10px;
      text-align: center;
    }
    #debugOutput {
      background: #111;
      color: #0f0;
      font-family: monospace;
      font-size: 0.9em;
      border-radius: 10px;
      padding: 10px;
      text-align: left;
      overflow-y: auto;
      max-height: 250px;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>

  <h1>üöÄ Solana Dashboard</h1>
  <p>Coin98 Compatible</p>

  <!-- Wallet Section -->
  <div class="section">
    <h2>üíº Wallet</h2>
    <button id="connectBtn">Connect Coin98 Wallet</button>
    <p id="walletStatus">Not connected</p>
  </div>

  <!-- Token Search Section -->
  <div class="section">
    <h2>üîç Token Search</h2>
    <input id="tokenInput" placeholder="Enter token mint address" />
    <button id="loadBtn">Load Token Info</button>
  </div>

  <!-- Debug Output -->
  <div class="section">
    <h2>üêû Debug Output</h2>
    <div id="debugOutput">Waiting for logs...</div>
  </div>

  <!-- JavaScript -->
  <script type="module">
    import {
      Connection,
      PublicKey,
      clusterApiUrl
    } from "https://cdn.jsdelivr.net/npm/@solana/web3.js@1.95.3/+esm";

    const connectBtn = document.getElementById("connectBtn");
    const loadBtn = document.getElementById("loadBtn");
    const walletStatus = document.getElementById("walletStatus");
    const debugOutput = document.getElementById("debugOutput");

    // ‚úÖ Replace YOUR_API_KEY_HERE with your real Solana RPC API key
    const connection = new Connection(
      "https://mainnet.helius-rpc.com/?api-key= 605b36dd-80db-4fe2-a736-68af3b7a82c4
      "confirmed"
    );

    function logDebug(msg) {
      debugOutput.textContent += `\n${msg}`;
      debugOutput.scrollTop = debugOutput.scrollHeight;
    }

    // --- Connect Wallet Button ---
    connectBtn.onclick = async () => {
      if (!window.coin98 || !window.coin98.sol) {
        alert("Coin98 wallet not detected. Please open this site inside Coin98 or enable its extension.");
        logDebug("Coin98 wallet not detected.");
        return;
      }
      try {
        const resp = await window.coin98.sol.request({ method: "connect" });
        walletStatus.textContent = `Connected: ${resp.publicKey}`;
        connectBtn.textContent = "‚úÖ Connected";
        logDebug("Wallet connected: " + resp.publicKey);
      } catch (err) {
        walletStatus.textContent = "Connection failed.";
        connectBtn.textContent = "‚ùå Failed";
        logDebug("Wallet connection failed: " + err.message);
      }
    };

    // --- Load Token Info Button ---
    loadBtn.onclick = async () => {
      const tokenAddr = document.getElementById("tokenInput").value.trim();
      if (!tokenAddr) {
        alert("Enter a token mint address first.");
        return;
      }

      try {
        const mintPubkey = new PublicKey(tokenAddr);
        const supplyInfo = await connection.getTokenSupply(mintPubkey);
        const amount = supplyInfo.value.uiAmountString || "0";
        logDebug("Token Supply: " + amount);
        alert(`Token Supply: ${amount}`);
      } catch (err) {
        logDebug("Error fetching token supply: " + err.message);
        alert("Invalid token or RPC connection issue.");
      }
    };
  </script>
</body>
</html>
